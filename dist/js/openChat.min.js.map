{"version":3,"file":"openChat.min.js","sources":["../../src/js/openChat.ts"],"sourcesContent":["/**\n * Level Up Open GHL Chat\n *\n * Auto opens High Level chat widget and adds support for clickable buttons or elements on page to open chat.\n *\n * Usage:\n\n<script type=\"module\">\n  import { openChat } from \"https://cdn.jsdelivr.net/gh/levelupghl/ghlchattools@v1/dist/js/openChat.min.js\";\n  openChat(true, \".open-chat-button\");\n</script>\n\n **/\n\nasync function openWhenChatLoads(): Promise<void> {\n  return new Promise<void>((resolve) => {\n    const handler = (event: LCChatWidgetLoadedEvent) => {\n      resolve()\n      window.removeEventListener(\"LC_chatWidgetLoaded\", handler)\n      openChatWidget()\n    }\n    window.addEventListener(\"LC_chatWidgetLoaded\", handler, false)\n  })\n}\n\nfunction addListeners(selector: string) {\n  document.querySelectorAll(selector).forEach((el) => {\n    el.addEventListener(\"click\", (event) => {\n      event.stopPropagation()\n      event.preventDefault()\n      openChatWidget()\n    })\n  })\n}\n\nfunction openChatWidget() {\n  window.leadConnector.chatWidget.openWidget()\n}\n\nexport const openChat = (\n  autoOpen: boolean = true,\n  elemSelector: string | undefined\n) => {\n  if (autoOpen) {\n    if (!window.leadConnector?.chatWidget?.isLoaded) {\n      openWhenChatLoads()\n    } else {\n      openChatWidget()\n    }\n  }\n  if (elemSelector) {\n    document.addEventListener(\"hydrationDone\", () => {\n      addListeners(elemSelector)\n    })\n    addListeners(elemSelector)\n  }\n}\n"],"names":["openWhenChatLoads","__async","resolve","handler","event","openChatWidget","addListeners","selector","el","openChat","autoOpen","elemSelector","_a","_b"],"mappings":";;;;uPAcA,SAAeA,GAAmC,CAAAC,OAAAA,EAAA,KAChD,KAAA,WAAA,CAAA,OAAO,IAAI,QAAeC,GAAY,CACpC,MAAMC,EAAWC,GAAmC,CAClDF,IACA,OAAO,oBAAoB,sBAAuBC,CAAO,EACzDE,EACF,CAAA,EACA,OAAO,iBAAiB,sBAAuBF,EAAS,EAAK,CAC/D,CAAC,CACH,CAEA,CAAA,CAAA,SAASG,EAAaC,EAAkB,CACtC,SAAS,iBAAiBA,CAAQ,EAAE,QAASC,GAAO,CAClDA,EAAG,iBAAiB,QAAUJ,GAAU,CACtCA,EAAM,gBAAA,EACNA,EAAM,eAAe,EACrBC,GACF,CAAC,CACH,CAAC,CACH,CAEA,SAASA,GAAiB,CACxB,OAAO,cAAc,WAAW,WAAA,CAClC,CAEO,MAAMI,EAAW,CACtBC,EAAoB,GACpBC,IACG,CA1CL,IAAAC,EAAAC,EA2CMH,KACGG,GAAAD,EAAA,OAAO,gBAAP,KAAAA,OAAAA,EAAsB,aAAtB,MAAAC,EAAkC,SAGrCR,EAAAA,EAFAL,EAAAA,GAKAW,IACF,SAAS,iBAAiB,gBAAiB,IAAM,CAC/CL,EAAaK,CAAY,CAC3B,CAAC,EACDL,EAAaK,CAAY,EAE7B"}